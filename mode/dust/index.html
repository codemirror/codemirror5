<!doctype html>

<title>CodeMirror: Dust mode</title>
<meta charset="utf-8"/>
<link rel=stylesheet href="../../doc/docs.css">

<link rel="stylesheet" href="../../lib/codemirror.css">
<script src="../../lib/codemirror.js"></script>
<script src="../../addon/mode/simple.js"></script>
<script src="../../addon/mode/multiplex.js"></script>
<script src="../xml/xml.js"></script>
<script src="dust.js"></script>
<style>.CodeMirror {border-top: 1px solid black; border-bottom: 1px solid black;}</style>
<div id=nav>
  <a href="http://codemirror.net"><h1>CodeMirror</h1><img id=logo src="../../doc/logo.png"></a>

  <ul>
    <li><a href="../../index.html">Home</a>
    <li><a href="../../doc/manual.html">Manual</a>
    <li><a href="https://github.com/codemirror/codemirror">Code</a>
  </ul>
  <ul>
    <li><a href="../index.html">Language modes</a>
    <li><a class=active href="#">HTML mixed</a>
  </ul>
</div>

<article>
<h2>Dust</h2>
<form><textarea id="code" name="code">
{>"layouts/default"/}

{<title}
  {request.website.page.title}
{/title}

Parent: {firstName} {lastName}{~n}
Children: {#children}{firstName} {lastName} {/children}

Hello {global} {name}!{~n}
{#friend}Hello {global} {name}!{/friend}

Current context: {.}{~n}
Dust can search upwards: {foo}{~n}
But, it can't search up and then down: {two}{~n}
So you need to search up, and then start a new search: {#one}{two}{/one}{~n}
Or, you can search up, and then do a dotted lookup: {one.two}

Your IP address is {jsonTest.ip}

{#appStatusOK}
  Everything is awesome!
  {:gearsError}
    Gears are stopped! Status code: {gears.error}
  {:engineError}
    Engine is not running! Engine temperature: {engine.temperature}
  {:oilLevelError}
    Oil level is too low! Current level: {engine.oilLevel}
{/appStatusOK}

{#friends}{.} {/friends}{~n}
{#friendsHelper}{.} {/friendsHelper}{~n}
{?hasFriends}Yay friends!{/hasFriends}{~n}
{?hasFriendsHelper}Yay friends!{/hasFriendsHelper}

{#status}No Status Available!{/status}

{#status}
  System Status: {#OK}OK!{:else}Horribly Wrong!{/OK}
{/status}

{#login}
  Welcome!
  {:usernameError}
  Your username was not found.
  {:passwordError}
  Your password was incorrect. You have {.} attempts remaining.
  {:else}
  Please log in!
{/login}

{#price value=39.9 /}

{#say text="Hello!"/}

{#greet:friends/}{~n}
{#greet:acquaintances/}

{#query}{data}{/query}

{#ip}Your IP address: {ip}{/ip}

{#friends}
  {name} - {birthday}{~s}
{/friends}

{#convertToCelsius temperatureF="68" /}

{#orderedRacers}
  {name} - {time} minutes{~s}
{/orderedRacers}

{title}{~n}
{title|s}{~n}
{title|js|s}

{?isGreeting}Greetings{:else}Goodbye{/isGreeting} from {parkName}, The {qualifier} Place on Earth!

{#parks}
  {>"disney-park" parkName=name qualifier=qualifier/}{~n}
{/parks}

{^isReady}Not ready yet.{:else}I'm ready to go!{/isReady}

Comments {! in Dust !}can be used for documentation.{~n}
Comments can also be used {! <button>Click me!</button> !}to test or remove features.

{!
  Outside of the section, Dust looks for values
  at the root of the JSON context
!}
The value of name is: {name}{~n}
{#extraData}
  {!
    Inside this section, Dust looks for
    values within the extraData object
  !}
  Inside the section, the value of name is: {name}{~n}
{/extraData}
The value of name is: {name}, again.{~n}
{#nonExistentContext}
  This is only output if "nonExistentContext" exists.
{:else}
  Because "nonExistentContext" does not exist, the else body is output.
{/nonExistentContext}

{+greeting}Hello!{/greeting} world.
{<greeting}Howdy{/greeting}

You{~s}can{~s}add{~s}spaces{~s}and{~n}new-lines with Dust specials.{~n}{~n}Curly braces that are usually reserved for {~lb}dust{~rb} syntax can be created with Dust specials, too.

The answer is {@eq key=answer value=42}42{:else}wrong{/eq}.

{! Base Template !}
<div class="page">
  <h1>{+pageHeader}LinkedIn{/pageHeader}</h1>
  <div class="bodyContent">
    {+bodyContent/}
  </div>
  <div class="footer">
    {+pageFooter}
       <a href="/contactUs">Contact Us</a>
    {/pageFooter}
  </div>
</div>

{! Use the base template as a partial !}
{>"base_template"/}
{<bodyContent}
<p>Your body content</p>
{/bodyContent}
{<pageFooter}
       This is a NEW footer
{/pageFooter}
</textarea></form>
    <script>
      var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
        lineNumbers: true,
        matchBrackets: true,
        mode: {name: "dust", base: "text/html"}
      });
    </script>

    <p>Dust syntax highlighting for CodeMirror.</p>

    <p><strong>MIME types defined:</strong> <code>text/x-dust-template</code></p>

    <p>Supported options: <code>base</code> to set the mode to
    wrap. For example, use</p>
    <pre>mode: {name: "dust", base: "text/html"}</pre>
    <p>to highlight a mixed HTML template.</p>
</article>
