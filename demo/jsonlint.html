<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>CodeMirror: JSON Lint Demo</title>
    <link rel="stylesheet" href="../lib/codemirror.css">
    <script src="../lib/codemirror.js"></script>
    <script src="../mode/javascript/javascript.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jshint/r07/jshint.js"></script>
    <link rel="stylesheet" href="../doc/docs.css">

	<script src="../addon/lint/jsonlint.js"></script>

	<link rel="stylesheet" href="../lib/codemirror-lint.css">
	<script src="../addon/lint/lint.js"></script>
	<script src="../addon/lint/json-lint.js"></script>

    <style type="text/css">
      .CodeMirror {border: 1px solid black;}
    </style>
  </head>
  <body>
    <h1>CodeMirror: JSON Lint Demo</h1>

    <textarea id="code">[
 {
 error
  "_id": "post 1",
  "author": "Bob",
  "content": "...",
  "page_views": 5
 },
 {
  "_id": "post 2",
  "author": "Bob",
  "content": "...",
  "page_views": 9
 },
 {
  "_id": "post 3",
  "author": "Bob",
  "content": "...",
  "page_views": 8
 }
]
</textarea>

<script>
window.onload = function() {

  var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
    lineNumbers: true,
    mode: "application/json",
    gutters: ["CodeMirror-lints"]
  });

  var validate = function() {
  	CodeMirror.validate(editor, CodeMirror.jsonValidator);  	
  };
  var waiting;
  editor.on("change", function() {
	clearTimeout(waiting);
	waiting = setTimeout(validate, 500);
  });

  setTimeout(validate, 100);

};

"long line to create a horizontal scrollbar, in order to test whether the (non-inline) widgets stay in place when scrolling to the right";
</script>
<p>This demo runs <a href="https://github.com/zaach/jsonlint">JSONLint</a> over the code
in the editor and use CodeMirror Lint to display the warnings that JSONLint comes up with.</p>
  </body>
</html>
